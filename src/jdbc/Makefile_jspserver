JAVAC = javac

JDBC_SRC_DIR = .
JSPSERVER_SRC_DIR = .

JSP_CLASS_DIR = ./class_jspserver

include $(JDBC_SRC_DIR)/make_common

SRCS =	$(JDBC_SRCS) 
JSP_SRCS = $(SRCS) $(JSPSERVER_SRCS)

all: 	$(JSP_CLASS_DIR)/$(JSP_OUTPUT) properties


$(JSP_CLASS_DIR)/$(JSP_OUTPUT): $(JSP_SRCS)
	mkdir -p $(JSP_CLASS_DIR)
	$(JAVAC) $(DEBUG_FLAG) -d $(JSP_CLASS_DIR) $(JSP_SRCS)
	$(MAKE_JSP_JAR)

properties:
	cp -f $(LOGGING_PROPERTIES) $(JSP_CLASS_DIR)


$(JDBC_SRC_DIR)/cubrid/jdbc/jci/%.java: $(JDBC_SRC_DIR)/cubrid/jdbc/jci/%.pjava
	@rm -f $@
	cpp $(CPP_OPT_JSP) $< $@
	@chmod 400 $@

$(JDBC_SRC_DIR)/cubrid/jdbc/driver/%.java: $(JDBC_SRC_DIR)/cubrid/jdbc/driver/%.pjava
	@rm -f $@
	cpp $(CPP_OPT_JSP) $< $@
	@chmod 400 $@

clean:
	/bin/rm -rf $(JSP_CLASS_DIR)
	touch $(JDBC_SRC_DIR)/cubrid/jdbc/driver/*.pjava
	touch $(JDBC_SRC_DIR)/cubrid/jdbc/jci/*.pjava



