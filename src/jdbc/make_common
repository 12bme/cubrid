JDBC_DRIVER_MAJOR_VERSION = $(shell cut -d . -f 1 ../../BUILD_NUMBER)
JDBC_DRIVER_MINOR_VERSION = $(shell cut -d . -f 2 ../../BUILD_NUMBER)
JDBC_DRIVER_PATCH_VERSION = $(shell cut -d . -f 3 ../../BUILD_NUMBER)
JDBC_DRIVER_SERIAL_NUMBER = $(shell cut -d . -f 4 ../../BUILD_NUMBER)

DRIVER = cubridjdbc$(JDBC_DRIVER_MAJOR_VERSION).$(JDBC_DRIVER_MINOR_VERSION).$(JDBC_DRIVER_PATCH_VERSION).$(JDBC_DRIVER_SERIAL_NUMBER).jar

JSP_OUTPUT = jspserver.jar

CPP_DEF_DRIVER = -DJDBC_DRIVER_MAJOR_VERSION=$(JDBC_DRIVER_MAJOR_VERSION)      \
          -DJDBC_DRIVER_MINOR_VERSION=$(JDBC_DRIVER_MINOR_VERSION)      \
          -DJDBC_DRIVER_PATCH_VERSION=$(JDBC_DRIVER_PATCH_VERSION)      \
          -DJDBC_DRIVER_SERIAL_NUMBER=$(JDBC_DRIVER_SERIAL_NUMBER)

CPP_DEF_JSP = -DJDBC_DRIVER_MAJOR_VERSION=$(JDBC_DRIVER_MAJOR_VERSION)      \
          -DJDBC_DRIVER_MINOR_VERSION=$(JDBC_DRIVER_MINOR_VERSION)      \
          -DJDBC_DRIVER_PATCH_VERSION=$(JDBC_DRIVER_PATCH_VERSION)      \
          -DJDBC_DRIVER_SERIAL_NUMBER=$(JDBC_DRIVER_SERIAL_NUMBER)      \
	  -DSERVER_SIDE_JDBC


CPP_OPT_DRIVER = -C -P $(CPP_DEF_DRIVER)
CPP_OPT_JSP = -C -P $(CPP_DEF_JSP)

VERSION_FILE = CUBRID-JDBC-$(JDBC_DRIVER_MAJOR_VERSION).$(JDBC_DRIVER_MINOR_VERSION).$(JDBC_DRIVER_PATCH_VERSION).$(JDBC_DRIVER_SERIAL_NUMBER)

MAKE_DRIVER_JAR = (cd $(CLASS_DIR) ; touch $(VERSION_FILE);jar cf $(DRIVER) cubrid $(VERSION_FILE); /bin/rm -f cubridjdbc.jar ; ln -s $(DRIVER) cubridjdbc.jar)

MAKE_JSP_JAR = (cd $(JSP_CLASS_DIR) ; jar cf $(JSP_OUTPUT) com cubrid)


JDBC_SRCS =	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UConnection.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UJCIManager.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDConnection.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDDriver.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDCancelQueryThread.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDBlob.java			\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDClob.java			\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDGloInputStream.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDGloOutputStream.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDGloWriter.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDGloReader.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDComparator.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDDatabaseMetaData.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDInputStream.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDJDBCErrorCode.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDPreparedStatement.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDReader.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDResultSet.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDResultSetMetaData.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDResultSetWithoutQuery.java\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDStatement.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDCallableStatement.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDDataSource.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDDataSourceObjectFactory.java\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDConnectionWrapperPooling.java\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDPooledConnection.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDDataSourceBase.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDPoolDataSourceBase.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDConnectionPoolDataSource.java\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDConnectionPoolManager.java\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDConnectionEventListener.java\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDXADataSource.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDXAConnection.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDConnectionWrapperXA.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDXid.java			\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDOutResultSet.java	        \
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDXAResource.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDXidTable.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDXidInfo.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDException.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDKeyTable.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/driver/CUBRIDConnectionKey.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UStatement.java			\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UErrorCode.java			\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UAParameter.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UBatchResult.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UBindParameter.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UColumnInfo.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UError.java			\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UFunctionCode.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UGetTypeConvertedValue.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UInputBuffer.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UTimedInputStream.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UTimedDataInputStream.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UJCIUtil.java			\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UOutputBuffer.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UParameter.java			\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UPutByOIDParameter.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UResultInfo.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UResultTuple.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/USchType.java			\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UJciException.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UUType.java			\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UUpdateParameter.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/CUBRIDArray.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/CUBRIDCommandType.java		\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/CUBRIDIsolationLevel.java	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UUrlCache.java           	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UUrlHostKey.java	        \
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UStmtCache.java          	\
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UBindKey.java	                \
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UResCache.java	                \
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UStatementCacheData.java        \
		$(JDBC_SRC_DIR)/cubrid/jdbc/jci/UConKey.java                	\
		$(JDBC_SRC_DIR)/cubrid/sql/CUBRIDOID.java


JSPSERVER_SRCS = \
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/Server.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/SpSecurityManager.java		\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/StoredProcedure.java		\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/StoredProcedureClassLoader.java	\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/TargetMethod.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/TargetMethodCache.java		\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/ExecuteThread.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/exception/TypeMismatchException.java		\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/exception/ExecuteException.java		\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/BooleanValue.java	        	\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/ByteValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/DateValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/DoubleValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/FloatValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/IntValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/LongValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/NullValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/NumericValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/OidValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/ResultSetValue.java		\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/SetValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/ShortValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/StringValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/TimeValue.java			\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/TimestampValue.java		\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/DatetimeValue.java		\
		$(JSPSERVER_SRC_DIR)/com/cubrid/jsp/value/Value.java

LOGGING_PROPERTIES = $(JSPSERVER_SRC_DIR)/logging.properties
